<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown 실시간 렌더링</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/2.1.3/marked.min.js"></script>
    <style>
        textarea {
            width: 30%;
            height: 200px;
            font-size: 16px;
            margin-bottom: 10px;
        }
        #markdown-container {
            display: flex;
            flex-direction: row;
            align-items: flex-start;
            width: 30%; /* textarea의 width와 동일하게 설정 */
            height: 200px; /* textarea의 height와 동일하게 설정 */
            overflow: hidden; /* 내용이 넘칠 경우 숨김 */
            white-space: nowrap; /* 한 줄로 표시 */
            position: relative; /* 상대 위치 설정 */
        }
        #markdown {
            border: 1px solid #ccc;
            padding: 10px;
            width: 100%; /* markdown-container의 크기와 동일하게 설정 */
            height: 100%; /* markdown-container의 크기와 동일하게 설정 */
            overflow-y: auto; /* 내용이 넘칠 경우 스크롤 표시 */
        }

        .markdown-btn {
            cursor: pointer;
            margin-right: 10px;
            padding: 5px 10px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
        }
        .markdown-btn:hover {
            background-color: #0056b3;
        }
        .left-section-container {
            display: flex;
        }
    </style>
</head>
<body>
<div>
    <button class="markdown-btn" onclick="insertMarkdown('# ')" title="H1">#</button>
    <button class="markdown-btn" onclick="insertMarkdown('## ')" title="H2">##</button>
    <button class="markdown-btn" onclick="insertMarkdown('### ')" title="H3">###</button>
    <button class="markdown-btn" onclick="insertMarkdown('#### ')" title="H4">####</button>
    <button class="markdown-btn" onclick="insertMarkdown('**')" title="Bold">Bold</button>
    <button class="markdown-btn" onclick="insertMarkdown('_')" title="Italic">Italic</button>
    <button class="markdown-btn" onclick="insertMarkdown('~~')" title="Strikethrough">Strikethrough</button>
    <button class="markdown-btn" onclick="insertMarkdown('> ')" title="Blockquote">Quote</button>
    <button class="markdown-btn" onclick="insertMarkdown('[링크텍스트](링크 등록)')" title="Link">Link</button>
    <button class="markdown-btn" onclick="insertMarkdown('```\n\n```')" title="Code Block">Code Block</button>
</div>
<div class="left-section-container">
    <textarea id="content" name="content" required></textarea>
    <div id="markdown-container" style="display: none">
        <div id="markdown"></div>
    </div>
</div>


<script>
    document.getElementById('content').addEventListener('input', function() {
        var markdown = this.value;
        var html = marked(markdown);
        document.getElementById('markdown').innerHTML = html;
    });

    function insertMarkdown(text) {
        var textarea = document.getElementById('content');
        var start = textarea.selectionStart;
        var end = textarea.selectionEnd;
        var selectedText = textarea.value.substring(start, end);
        var replacement = text + selectedText + text;
        if (start === end) {
            replacement = text;
        }
        textarea.value = textarea.value.substring(0, start) + replacement + textarea.value.substring(end);
        textarea.focus();
        textarea.setSelectionRange(start + replacement.length, start + replacement.length);
    }

    var markdownContainer = document.getElementById('markdown-container');

    // textarea에 마우스 호버시 markdown-container 표시
    document.getElementById('content').addEventListener('mouseenter', function() {
        markdownContainer.style.display = 'flex';
    });

    // markdown-container에 마우스 호버시 markdown-container 유지
    markdownContainer.addEventListener('mouseenter', function() {
        markdownContainer.style.display = 'flex';
    });

    // textarea와 markdown-container를 벗어나면 markdown-container 숨김
    document.getElementById('content').addEventListener('mouseleave', function(event) {
        markdownContainer.style.display = 'none';
    });

    markdownContainer.addEventListener('mouseleave', function(event) {
        markdownContainer.style.display = 'none';
    });
</script>
</body>
</html>
